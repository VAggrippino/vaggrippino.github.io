<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog History | Vince's Website</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="history">
    <header class="header">
        <nav class="main-nav">
    <button type="button" aria-expanded="false" aria-controls="main-nav__list" class="main-nav__control">
        <i aria-hidden="true" class="fa-solid fa-burger"></i>
        <span class="main-nav__title">Main Menu</span>
    </button>
    <ul id="main-nav__list" role="list" class="main-nav__list">
        <li class="main-nav__item">
            <a href="/">
                <i aria-hidden="true" class="fa-solid fa-house"></i>
                <span>Home</span>
            </a>
        </li>
<li class="main-nav__item">
            <a href="/blog/">
                <i aria-hidden="true" class="fa-solid fa-newspaper"></i>
                <span>Blog</span>
            </a>
        </li>
<li class="main-nav__item">
            <a href="/projects/">
                <i aria-hidden="true" class="fa-solid fa-sitemap"></i>
                <span>Projects</span>
            </a>
        </li>
<li class="main-nav__item">
            <a href="/wiki/">
                <i aria-hidden="true" class="fa-solid fa-book-bookmark"></i>
                <span>Wiki</span>
            </a>
        </li>
<li class="main-nav__item">
            <a href="/about/">
                <i aria-hidden="true" class="fa-solid fa-id-card"></i>
                <span>About</span>
            </a>
        </li>
<li class="main-nav__item">
            <a href="/contact/">
                <i aria-hidden="true" class="fa-solid fa-comment"></i>
                <span>Contact</span>
            </a>
        </li>
    </ul>
</nav>
    </header>

    <main class="main"><h1>Blog History Page 4</h1><article class="collections-post">
        <h2 class="collections-post__title">
            <a href="/how-to-really-check-with-javascript-if-css-failed-to-load-from-a-cdn/">
                <i class="fa-solid fa-bookmark"></i>
                <span>How to really check with JavaScript if CSS failed to load from a CDN</span>
            </a>
        </h2>
        <div class="collections-post__date">4th December 2019 - Wednesday</div><div class="collections-post__content"><p></p><figure class="post__image">
<img src="/wp-content/uploads/2019/12/error-loading-min-e1629184314699.jpg" alt="How to really check with JavaScript if CSS failed to load from a CDN">
</figure><p></p>
<h2 class="post__title"><a href="/how-to-really-check-with-javascript-if-css-failed-to-load-from-a-cdn/">How to really check with JavaScript if CSS failed to load from a CDN</a></h2>
<div class="post__date">4th December 2019 - Wednesday</div>
<figure class="wp-block-image size-full">![](https://i0.wp.com/www.aggrippino.com/wp-content/uploads/2019/12/error-loading-min-e1629184314699.jpg?resize=1024%2C512&amp;ssl=1)</figure>I want to load a third-party CSS stylesheet from a CDN, but I’m concerned how it will affect my site if the CDN goes down. *How do I use JavaScript to check if a CSS file has loaded* so I can load a local fallback instead?
<p>This can’t be a new idea. I can get the answer from a web search, can’t I? …</p>
<h2>Incorrect Solution #1</h2>
<p>If I search the web for an answer, I can find many variations of this incorrect solution:</p>
<div class="incorrect-solution-target"></div>```
<pre data-enlighter-group data-enlighter-highlight data-enlighter-language="js" data-enlighter-linenumbers data-enlighter-lineoffset data-enlighter-theme data-enlighter-title class="EnlighterJSRAW incorrect-solution">// Just an example:
cdnUrl = `https://cdnjs.vinceflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css`;
localUrl = `css/all.min.css`;
<p>let loaded = false;
for ( var i = 0; i &lt; document.styleSheets.length, i++ ) {
if ( document.styleSheets[i].href === cdnUrl ) {
loaded = true;
}
}
if ( !loaded ) {
const localCss = document.createElement(<code>link</code>);
localCss.rel = <code>stylesheet</code>;
localCss.href = localUrl;
document.querySelector(<code>head</code>).appendChild(localCss);
}</p>
<pre><code>
If the document’s stylesheets don’t contain one with a URL matching the one from the CDN, add a reference to the local one. It doesn’t work, though. `document.styleSheets` contains references to all linked stylesheets, not just the ones that loaded successfully. Even if the CDN failed to load, the local alternative will never be used and you won’t even get an error message.

## Incorrect Solution #2

&lt;div class="incorrect-solution-target"&gt;&lt;/div&gt;```
&lt;pre class="EnlighterJSRAW incorrect-solution" data-enlighter-group="" data-enlighter-highlight="" data-enlighter-language="js" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-theme="" data-enlighter-title=""&gt;// Just an example:
cdnUrl = `https://cdnjs.vinceflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css`;
localUrl = `css/all.min.css`;

let loaded = false;
for ( var i = 0; i &amp;lt; document.styleSheets.length, i++ ) {
  if ( document.styleSheets[i].href === cdnUrl ) {
    if (document.styleSheets[i].cssRules !== null) {
      loaded = true;
    }
  }
}
if ( !loaded ) {
  const localCss = document.createElement(`link`);
  localCss.rel = `stylesheet`;
  localCss.href = localUrl;
  document.querySelector(`head`).appendChild(localCss);
}
</code></pre>
<p>This one looks a little better… <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet">CSSStyleSheet</a>s have a <code>cssRules</code> property which shows the rules associated with the stylesheet. If it didn’t load, it’ll be <code>null</code>, right? Wrong. In Firefox, <code>cssRules</code> is an empty array when the stylesheet fails to load. In Google Chrome, you get an “Uncaught DOMException” because a <code>CSSStyleSheet</code> that failed to load doesn’t have a <code>cssRules</code> property.</p>
<h2>A real solution?</h2>
<pre><code>&lt;pre class="EnlighterJSRAW" data-enlighter-group="" data-enlighter-highlight="" data-enlighter-language="js" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-theme="" data-enlighter-title=""&gt;export function cssFallback(cdnUrl, localPath) {
  // Create a new link tag and append it to the document head
  const loadAlternate = () =&amp;gt; {
    console.log(`Loading ${localPath}.`);
    const link = document.createElement(`link`);
    link.rel = `stylesheet`;
    link.href = localPath;
    document.querySelector(`head`).appendChild(link);
  }

  // Identify the CDN stylesheet
  const stylesheet = Array.from(document.styleSheets).filter((s) =&amp;gt; s.href === cdnUrl)[0];

  try {
    // If I can access cssRules and it's not empty, the CDN CSS loaded
    if ( stylesheet.cssRules.length === 0 ) {
      console.log(`The cssRules for ${cdnUrl} is empty.`)
      loadAlternate();
    }
  } catch (e) {
    console.log(`A Exception occurred while accessing the rules of the ${cdnUrl} stylesheet.`);
    console.log(e);
    loadAlternate();
  }
}
</code></pre>
<p>If the <code>cssRules</code> is an empty array, the CDN stylesheet failed to load in Mozilla Firefox. If there’s an Exception when we try to access the <code>cssRules</code>, the CDN stylesheet failed to load in Google Chrome.</p>
</pre></div></article><article class="collections-post">
        <h2 class="collections-post__title">
            <a href="/2023/03/eleventy-cool-uris/">
                <i class="fa-solid fa-bookmark"></i>
                <span>Eleventy's Cool URIs</span>
            </a>
        </h2>
        <div class="collections-post__date">27th March 2023 - Monday</div><div class="collections-post__content"><h2 class="post__title"><a href="/2023/03/eleventy-cool-uris/">Eleventy's Cool URIs</a></h2>
<div class="post__date">27th March 2023 - Monday</div>
<p>While getting started with 11ty, I saw in the output folder that an <code>index.md</code>
file would become <code>index.html</code>, as expected, but <code>README.md</code> became
<code>README/index.html</code>. I didn't understand why there was a special case for the
README file.</p>
<p>It took me a minute, but I <a href="https://www.11ty.dev/docs/permalinks/#cool-uris-dont-change">found it</a>
with a reference to an article at the W3C stating (among other things) that cool
URIs don't have file extensions.</p>
<p>Okay. I get it. I would've expected something like that to be my job, not the
tool's, but it makes sense and I agree. But what do I do if I really want to
have a named output file. There's gotta be a way. Well, scroll down. The <code>permalink</code> <em>front matter</em> value allows me to specify the relative URL of the file that will be generated.</p>
</div></article><article class="collections-post">
        <h2 class="collections-post__title">
            <a href="/2023/03/eleventy-setting-the-permalink-in-the-directory-data/">
                <i class="fa-solid fa-bookmark"></i>
                <span>Eleventy: Setting the permalink in the directory data</span>
            </a>
        </h2>
        <div class="collections-post__date">29th March 2023 - Wednesday</div><div class="collections-post__content"><h2 class="post__title"><a href="/2023/03/eleventy-setting-the-permalink-in-the-directory-data/">Eleventy: Setting the permalink in the directory data</a></h2>
<div class="post__date">29th March 2023 - Wednesday</div>
<p>The permalink for all templates in a directory can be set in a template directory data file. This can be used along with data variables to generate the ideal URLs.</p>
<p>For example, if you have pages in a <code>posts</code> subdirectory, but you want those pages to be at the root of the generated site, you might use something like this:</p>
<p>File: <code>posts/posts.json</code></p>
<pre><code class="language-json">{
  "permalink": "/.html"
}
</code></pre>
<p>Source: <a href="https://github.com/11ty/eleventy/issues/1783#issuecomment-842669102">GitHub thread</a></p>
</div></article><nav class="blog-history-nav">
    <h3 class="blog-history-nav__title">Blog History Pages</h3>
    <div class="blog-history-nav__caption">On page 5 of 7</div>

    
    <ol role="list" class="blog-history-nav__list"><li class="blog-history-nav__item">
                <a href="/blog/history/1/">1</a>
            </li>

            <li class="blog-history-nav__ellipsis">...</li>
            
            
            
            <li class="blog-history-nav__item">
                    <a href="/blog/history/4/">4</a>
                </li>
            <li class="blog-history-nav__item current">
                    <a href="/blog/history/5/" aria-current="page">5</a>
                </li>
            <li class="blog-history-nav__item">
                    <a href="/blog/history/6/">6</a>
                </li>
            <li class="blog-history-nav__item">
                <a href="/blog/history/7/">7</a>
            </li></ol>

    <div class="blog-history-nav__jump">
        <label for="blog-history-nav__jump__page">Jump to </label>
        <select name="page" id="blog-history-nav__jump__page" class="blog-history-nav__jump__page">
            <option value>Choose a Page</option><option value="1">Page 1</option><option value="2">Page 2</option><option value="3">Page 3</option><option value="4">Page 4</option><option value="5">Page 5</option><option value="6">Page 6</option><option value="7">Page 7</option></select>
        <a href="/blog/history/5" class="blog-history-nav__jump__go">Go</a>
    </div>
</nav></main>
    <footer class="footer"></footer>

    <script src="/js/main.js"></script>

</body>
</html>